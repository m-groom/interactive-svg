<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Directed Acyclic Graph Visualisations | Michael Groom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1><a href="https://michaelgroom.net/index.html">Michael Groom</a></h1>
    <hr>
    <h2><a href="index.html"> Overview</a> | <a href="markov-chain.html">Markov Chains</a> | DAGs | <a href="case-studies.html">Case Studies</a> | <a href="precursor-plots.html">Feature Importance</a>
    </h2>
    <br>

    <div class="svg-selector">
        <div class="info-panel">
            <h3>Interactive Directed Acyclic Graph Plots</h3>
            <p>Select an SVG file to load and interact with. Choose target season from the dropdown (currently only 'All' is available), then click load. </p>
            <strong>Controls:</strong></p>
            <ul>
                <li>Use the date slider to highlight nodes by their affiliation probabilities for a given target date; the slider activates after loading and the arrows step one month at a time. </li>
                <li>Use the cumulative probability dropdowns to calculate the cumulative probability from a node at level <i>n</i> to a node at level <i>m</i> &lt; <i>n</i>.</li>
                <li>Use the most probable path dropdowns to find (and highlight in red) the most probable path between a node at level <i>n</i> and a node at level <i>m</i> &lt; <i>n</i>.</li>
            </ul></p>
            <p><strong>Desktop:</strong>  Hover over nodes and edges to see details, click nodes for more information.</p>
            <p><strong>Mobile:</strong> Tap nodes and edges to see details, long press nodes for more information.</p>
        </div>

        <div class="selector-controls">
            <div class="control-row">
                <label for="dag-season-search"><strong>Select Target Season:</strong></label>
                <div class="search-container">
                    <input type="text" id="dag-season-search"
                        placeholder="Select from available target seasons or type to search..." autocomplete="off">
                    <div class="search-dropdown" id="dag-season-dropdown">
                        <div class="dropdown-content" id="dag-season-dropdown-content"></div>
                    </div>
                </div>
            </div>
            
            <button id="dag-load-svg-btn" disabled>Load</button>

            <div class="control-row">
                <label for="dag-date-slider"><strong>Select Target Date:</strong></label>
                <div class="slider-container">
                    <input type="range" id="dag-date-slider" min="0" max="0" value="0" disabled>
                    <button class="slider-step-btn" id="dag-slider-prev-btn" disabled>&#9664;</button>
                    <span id="dag-slider-date-label">&mdash;</span>
                    <button class="slider-step-btn" id="dag-slider-next-btn" disabled>&#9654;</button>
                </div>
            </div>

            <div class="control-row probability-row is-disabled" id="dag-prob-row">
                <label for="dag-prob-node-i"><strong>Cumulative probability:</strong></label>
                <div class="probability-controls">
                    <div class="probability-select-container">
                        <select id="dag-prob-node-i" disabled>
                            <option value="">Cluster i</option>
                        </select>
                    </div>
                    <div class="probability-select-container">
                        <select id="dag-prob-level-n" disabled>
                            <option value="">n months</option>
                        </select>
                    </div>
                    <span class="probability-to-label">to</span>
                    <div class="probability-select-container">
                        <select id="dag-prob-node-j" disabled>
                            <option value="">Cluster j</option>
                        </select>
                    </div>
                    <div class="probability-select-container">
                        <select id="dag-prob-level-m" disabled>
                            <option value="">m months</option>
                        </select>
                    </div>
                    <span id="dag-prob-value" class="probability-value">&mdash;</span>
                </div>
            </div>

            <div class="control-row path-row is-disabled" id="dag-path-row">
                <label for="dag-path-node-i"><strong>Most probable path:</strong></label>
                <div class="probability-controls">
                    <div class="probability-select-container">
                        <select id="dag-path-node-i" disabled>
                            <option value="">Cluster i</option>
                        </select>
                    </div>
                    <div class="probability-select-container">
                        <select id="dag-path-level-n" disabled>
                            <option value="">n months</option>
                        </select>
                    </div>
                    <span class="probability-to-label">to</span>
                    <div class="probability-select-container">
                        <select id="dag-path-node-j" disabled>
                            <option value="">Cluster j</option>
                        </select>
                    </div>
                    <div class="probability-select-container">
                        <select id="dag-path-level-m" disabled>
                            <option value="">m months</option>
                        </select>
                    </div>
                    <span id="dag-path-value" class="probability-value">&mdash;</span>
                </div>
            </div>
        </div>

        <div class="content-container">
            <div class="loading" id="dag-loading" style="display: none;">Loading...</div>
            <div class="error-message" id="dag-error" style="display: none;"></div>

            <div class="svg-container" id="dag-svg-container" style="display: none;">
                <!-- SVG will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip"></div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Load the modular JavaScript files -->
    <script type="module">
        import { InteractiveSVGApp } from './js/InteractiveSVGApp.js';
        
        // Initialize only the DAG section
        document.addEventListener('DOMContentLoaded', () => {
            const app = new InteractiveSVGApp();
            app.initializeDAGSection();
        });
    </script>
    <br>
    <hr>
</body>

<footer>
    Â© 2025 Michael Groom. Content licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.
</footer>

</html>
